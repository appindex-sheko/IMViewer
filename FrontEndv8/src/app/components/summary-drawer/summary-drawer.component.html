<!-- default summary template -->
<ng-template #defaultSummaryTemplate let-summaryProvider="summaryProvider">

  <ng-container *ngIf="summaryProvider!= null && summaryProvider.concept != null">
    <br>
    <br>
    <div class="icon-container">
      <span>{{summaryProvider.concept.iri}}</span>
      <a color="primary" mat-button (click)="summaryProvider.copyIri()" aria-label="Copy IRI">
        <mat-icon>content_copy</mat-icon>
      </a>
    </div>
    <br>
    <div><i>{{summaryProvider.concept.status}}</i> status and of type <i>{{summaryProvider.concept.conceptType}}</i></div>
  </ng-container>

</ng-template>

<!-- semantic ontology template -->
<ng-template #semanticOntologySummaryTemplate>
  <br>
  <br>
  <app-concept-definition [concept]="concept"></app-concept-definition>
</ng-template>

<!-- valueset summary templates -->
<ng-template #emptyValueSetTemplate>
  <div><b>Value Set has no members</b></div>
</ng-template>

<ng-template #valueSetSummaryTemplate let-summaryProvider="summaryProvider">
    <div *ngIf="summaryProvider.valueSet.isEmpty(); else emptyValueSetTemplate">
        <mat-action-list #members>
          <mat-list-item *ngFor="let member of summaryProvider.valueSet.members | slice: summaryProvider.pageStartIndex : summaryProvider.pageEndIndex" [matTooltip]="member.name">
            <mat-icon mat-list-icon>add_circle</mat-icon> <!-- TODO - only show circle on non members -->
            <span class="no-wrap">{{member.name}} ({{member.iri}})</span>
          </mat-list-item>
        </mat-action-list>
        <div style="bottom: 0; right: 0; position: absolute">
          <mat-paginator [length]="summaryProvider.valueSet.members.length" [pageSize]="summaryProvider.pageSize" [pageSizeOptions]="summaryProvider.pageSizeOptions" (page)="summaryProvider.onPageChange($event)" [showFirstLastButtons]=false>
          </mat-paginator>
        </div>
      </div>
</ng-template>

<!--healthrecord summary templates -->
<ng-template #emptyHealthRecordTemplate>
  <div><b>Data model has no properties</b></div>
</ng-template>

<ng-template #healthRecordSummaryTemplate let-summaryProvider="summaryProvider">
  <table *ngIf="summaryProvider.healthRecordProperties.length > 0; else emptyHealthRecordTemplate" mat-table [dataSource]="summaryProvider.healthRecordProperties" class="" style="width: 100%;">

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Name</th>
      <td mat-cell *matCellDef="let healthRecordProperty">
        {{healthRecordProperty.name}}
      </td>
    </ng-container>

    <ng-container matColumnDef="type">
      <th mat-header-cell *matHeaderCellDef>Type</th>
      <td mat-cell *matCellDef="let healthRecordProperty">
        {{healthRecordProperty.type}}
      </td>
    </ng-container>

    <ng-container matColumnDef="cardinality">
      <th mat-header-cell *matHeaderCellDef>Cardinality</th>
      <td mat-cell *matCellDef="let healthRecordProperty">
        {{healthRecordProperty.cardinality}}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="summaryProvider.columns"></tr>
    <tr mat-row *matRowDef="let row; columns: summaryProvider.columns;"></tr>
  </table>
</ng-template>

<!-- SideBar -->
<mat-drawer #drawer class="example-sidenav" mode="over" position="end" [opened]="isDrawerOpen"
style="width: 40%;overflow:hidden;">

<mat-card *ngIf="concept != null && perspective != null && summaryProvider != null">

    <mat-card-header>

      <div mat-card-avatar>
        <span class="fad fa-fw fa-2x {{perspective.icon}}" [style.color]="perspective.color"></span>
      </div>

      <mat-card-title [style.color]="perspective.color">{{perspective.caption + ' - ' + concept.name}}</mat-card-title>

      <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
        <mat-icon>more_vert</mat-icon>
      </button>
      <mat-menu #menu="matMenu">
        <ng-container *ngIf="hasRoute">
          <button mat-menu-item  (click)="gotoConcept()">
            <mat-icon>open_in_new</mat-icon>
            <span>Open</span>
          </button>
        </ng-container>
        <button mat-menu-item  (click)="close()">
          <mat-icon>close</mat-icon>
          <span>Close</span>
        </button>
      </mat-menu>

    </mat-card-header>

    <mat-card-content class="full-page-card">

      <ng-container *ngIf="concept.description != null">
        <span [innerHTML]="concept.description"></span>
      </ng-container>

      <ng-container *ngTemplateOutlet="this[summaryProvider.templateName]; context: { summaryProvider: summaryProvider }"></ng-container>

    </mat-card-content>
</mat-card>
</mat-drawer>
